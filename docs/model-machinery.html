<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Model machinery | Learning from the narrative and model in NASEM (2021) 'Nutrient Requirements of Dairy Cattle'</title>
  <meta name="description" content="This book is intended to help independent learners, students, and instructors interacting with the NASEM (2021) dairy nutrition model, especially in undergraduate courses." />
  <meta name="generator" content="bookdown 0.33.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Model machinery | Learning from the narrative and model in NASEM (2021) 'Nutrient Requirements of Dairy Cattle'" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book is intended to help independent learners, students, and instructors interacting with the NASEM (2021) dairy nutrition model, especially in undergraduate courses." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Model machinery | Learning from the narrative and model in NASEM (2021) 'Nutrient Requirements of Dairy Cattle'" />
  
  <meta name="twitter:description" content="This book is intended to help independent learners, students, and instructors interacting with the NASEM (2021) dairy nutrition model, especially in undergraduate courses." />
  

<meta name="author" content="MaryGrace Erickson, University of Wisconsin--Madison" />
<meta name="author" content="Michel A. Wattiaux, University of Wisconsin--Madison" />
<meta name="author" content="Mark D. Hanigan, Virginia Polytechnic Institute and State University" />
<meta name="author" content="Marina A.C. Danes, Universidade Federal de Lavras" />


<meta name="date" content="2023-04-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="requirements.html"/>
<link rel="next" href="conclusions-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script>
  function unrolltab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "none";
    evt.currentTarget.className += "none";
  }
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="www/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning NASEM Dairy (2021)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About this interactive textbook</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#information-for-educators"><i class="fa fa-check"></i><b>1.2</b> Information for educators</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#intended-audience"><i class="fa fa-check"></i><b>1.3</b> Intended audience</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assumptions-about-prior-knowledge"><i class="fa fa-check"></i><b>1.4</b> Assumptions about prior knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#technology-requirements"><i class="fa fa-check"></i><b>1.5</b> Technology requirements</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#accessing-the-nasem-2021-book"><i class="fa fa-check"></i><b>1.6</b> Accessing the NASEM (2021) book</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#the-nasem-dairy-8-software"><i class="fa fa-check"></i><b>1.7</b> The NASEM-dairy-8 software</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#running-a-simulation"><i class="fa fa-check"></i><b>1.8</b> Running a simulation</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#known-updates-discrepancies-in-book-vs.-software"><i class="fa fa-check"></i><b>1.9</b> Known updates (discrepancies in book vs. software)</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="index.html"><a href="index.html#nasem-dairy-8-software-updates-and-bugs"><i class="fa fa-check"></i><b>1.9.1</b> NASEM dairy-8 software updates and bugs</a></li>
<li class="chapter" data-level="1.9.2" data-path="index.html"><a href="index.html#differences-between-the-book-and-software"><i class="fa fa-check"></i><b>1.9.2</b> Differences between the book and software</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#contribute-edits-and-suggestions"><i class="fa fa-check"></i><b>1.10</b> Contribute edits and suggestions</a></li>
<li class="chapter" data-level="1.11" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i><b>1.11</b> License</a></li>
<li class="chapter" data-level="1.12" data-path="index.html"><a href="index.html#citations"><i class="fa fa-check"></i><b>1.12</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html"><i class="fa fa-check"></i><b>2</b> Introduction to nutritional models</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#a-brief-history"><i class="fa fa-check"></i><b>2.1</b> A brief history</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#definition"><i class="fa fa-check"></i><b>2.2</b> Definition</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#usefulness"><i class="fa fa-check"></i><b>2.3</b> Usefulness</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#nasem-2021-and-other-dairy-nutrition-models"><i class="fa fa-check"></i><b>2.4</b> NASEM (2021) and other dairy nutrition models</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#lets-develop-a-simple-nutritional-model"><i class="fa fa-check"></i><b>2.5</b> Let's develop a simple nutritional model</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#hypothesis-generation"><i class="fa fa-check"></i><b>2.5.1</b> Hypothesis generation</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#data-collection-through-observation-or-experimentation"><i class="fa fa-check"></i><b>2.5.2</b> Data collection through observation (or experimentation)</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#model-development"><i class="fa fa-check"></i><b>2.5.3</b> Model development</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#model-verification"><i class="fa fa-check"></i><b>2.5.4</b> Model verification</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#model-refinement-re-starting-the-process"><i class="fa fa-check"></i><b>2.5.5</b> Model refinement (re-starting the process)</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#reflecting-on-our-example-model"><i class="fa fa-check"></i><b>2.5.6</b> Reflecting on our example model</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#scaling-up-and-adding-complexity"><i class="fa fa-check"></i><b>2.6</b> Scaling up and adding complexity</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#conclusion"><i class="fa fa-check"></i><b>2.7</b> Conclusion</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-nutritional-models.html"><a href="introduction-to-nutritional-models.html#r-code-for-figures"><i class="fa fa-check"></i><b>2.8</b> R code for figures</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="systems-concepts.html"><a href="systems-concepts.html"><i class="fa fa-check"></i><b>3</b> Systems concepts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="systems-concepts.html"><a href="systems-concepts.html#the-animal-nutritional-system"><i class="fa fa-check"></i><b>3.1</b> The animal nutritional system</a></li>
<li class="chapter" data-level="3.2" data-path="systems-concepts.html"><a href="systems-concepts.html#ways-of-understanding-nutritional-systems"><i class="fa fa-check"></i><b>3.2</b> Ways of understanding nutritional systems</a></li>
<li class="chapter" data-level="3.3" data-path="systems-concepts.html"><a href="systems-concepts.html#systems-concepts-1"><i class="fa fa-check"></i><b>3.3</b> Systems concepts</a></li>
<li class="chapter" data-level="3.4" data-path="systems-concepts.html"><a href="systems-concepts.html#single-animal-nutritional-system"><i class="fa fa-check"></i><b>3.4</b> Single-animal nutritional system</a></li>
<li class="chapter" data-level="3.5" data-path="systems-concepts.html"><a href="systems-concepts.html#physicalchemical-principles-mass-energy-balance"><i class="fa fa-check"></i><b>3.5</b> Physical/chemical principles: Mass &amp; energy balance</a></li>
<li class="chapter" data-level="3.6" data-path="systems-concepts.html"><a href="systems-concepts.html#biological-principles-ordered-processes"><i class="fa fa-check"></i><b>3.6</b> Biological principles: ordered processes</a></li>
<li class="chapter" data-level="3.7" data-path="systems-concepts.html"><a href="systems-concepts.html#biological-principles-context-dependence"><i class="fa fa-check"></i><b>3.7</b> Biological principles: context-dependence</a></li>
<li class="chapter" data-level="3.8" data-path="systems-concepts.html"><a href="systems-concepts.html#conclusions"><i class="fa fa-check"></i><b>3.8</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="requirements.html"><a href="requirements.html"><i class="fa fa-check"></i><b>4</b> Requirements</a>
<ul>
<li class="chapter" data-level="4.1" data-path="requirements.html"><a href="requirements.html#defining-nutrient-flows"><i class="fa fa-check"></i><b>4.1</b> Defining nutrient flows</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="requirements.html"><a href="requirements.html#supplies-requirements-and-balances"><i class="fa fa-check"></i><b>4.1.1</b> Supplies, requirements, and balances</a></li>
<li class="chapter" data-level="4.1.2" data-path="requirements.html"><a href="requirements.html#requirement-definitions-in-human-and-dairy-nutrition"><i class="fa fa-check"></i><b>4.1.2</b> Requirement definitions in human and dairy nutrition</a></li>
<li class="chapter" data-level="4.1.3" data-path="requirements.html"><a href="requirements.html#absorbed-and-metabolizable-amounts"><i class="fa fa-check"></i><b>4.1.3</b> Absorbed and metabolizable amounts</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="requirements.html"><a href="requirements.html#dietary-reference-intakes"><i class="fa fa-check"></i><b>4.2</b> Dietary reference intakes</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="requirements.html"><a href="requirements.html#protecting-against-underfeeding-with-safety-factors"><i class="fa fa-check"></i><b>4.2.1</b> Protecting against underfeeding with "safety factors"</a></li>
<li class="chapter" data-level="4.2.2" data-path="requirements.html"><a href="requirements.html#protecting-against-overfeeding"><i class="fa fa-check"></i><b>4.2.2</b> Protecting against overfeeding</a></li>
<li class="chapter" data-level="4.2.3" data-path="requirements.html"><a href="requirements.html#accounting-for-uncertainty"><i class="fa fa-check"></i><b>4.2.3</b> Accounting for uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="requirements.html"><a href="requirements.html#nasem-estimates-of-requirements"><i class="fa fa-check"></i><b>4.3</b> NASEM estimates of requirements</a></li>
<li class="chapter" data-level="4.4" data-path="requirements.html"><a href="requirements.html#types-of-literature-used-by-nasem--nasem8"><i class="fa fa-check"></i><b>4.4</b> Types of literature used by NASEM <span class="citation">(2021)</span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="requirements.html"><a href="requirements.html#measuring-composition-of-inputs-body-tissues-and-outputs"><i class="fa fa-check"></i><b>4.4.1</b> Measuring composition of inputs, body tissues, and outputs</a></li>
<li class="chapter" data-level="4.4.2" data-path="requirements.html"><a href="requirements.html#measuring-losses-when-intake-is-minimal"><i class="fa fa-check"></i><b>4.4.2</b> Measuring losses when intake is minimal</a></li>
<li class="chapter" data-level="4.4.3" data-path="requirements.html"><a href="requirements.html#studying-symptoms-of-deficiency-and-toxicity"><i class="fa fa-check"></i><b>4.4.3</b> Studying symptoms of deficiency and toxicity</a></li>
<li class="chapter" data-level="4.4.4" data-path="requirements.html"><a href="requirements.html#regression-on-productive-performance"><i class="fa fa-check"></i><b>4.4.4</b> Regression on productive performance</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="requirements.html"><a href="requirements.html#r-code-for-figures-1"><i class="fa fa-check"></i><b>4.5</b> R code for figures</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model-machinery.html"><a href="model-machinery.html"><i class="fa fa-check"></i><b>5</b> Model machinery</a>
<ul>
<li class="chapter" data-level="5.1" data-path="model-machinery.html"><a href="model-machinery.html#basic-nutrition-math"><i class="fa fa-check"></i><b>5.1</b> Basic nutrition math</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="model-machinery.html"><a href="model-machinery.html#using-ratios-percentages-proportions"><i class="fa fa-check"></i><b>5.1.1</b> Using ratios, percentages, proportions</a></li>
<li class="chapter" data-level="5.1.2" data-path="model-machinery.html"><a href="model-machinery.html#converting-units"><i class="fa fa-check"></i><b>5.1.2</b> Converting units</a></li>
<li class="chapter" data-level="5.1.3" data-path="model-machinery.html"><a href="model-machinery.html#converting-basis"><i class="fa fa-check"></i><b>5.1.3</b> Converting basis</a></li>
<li class="chapter" data-level="5.1.4" data-path="model-machinery.html"><a href="model-machinery.html#scaling"><i class="fa fa-check"></i><b>5.1.4</b> Scaling</a></li>
<li class="chapter" data-level="5.1.5" data-path="model-machinery.html"><a href="model-machinery.html#weighting"><i class="fa fa-check"></i><b>5.1.5</b> Weighting</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="model-machinery.html"><a href="model-machinery.html#predictive-models"><i class="fa fa-check"></i><b>5.2</b> Predictive models</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="model-machinery.html"><a href="model-machinery.html#predictive-model-descriptors"><i class="fa fa-check"></i><b>5.2.1</b> Predictive model descriptors</a></li>
<li class="chapter" data-level="5.2.2" data-path="model-machinery.html"><a href="model-machinery.html#simple-linear-model-empirical-input-output"><i class="fa fa-check"></i><b>5.2.2</b> Simple linear model (empirical, input-output)</a></li>
<li class="chapter" data-level="5.2.3" data-path="model-machinery.html"><a href="model-machinery.html#exponential-growth-kinetic-model-theoretical-mechanistic"><i class="fa fa-check"></i><b>5.2.3</b> Exponential growth kinetic model (theoretical, mechanistic)</a></li>
<li class="chapter" data-level="5.2.4" data-path="model-machinery.html"><a href="model-machinery.html#saturable-growth-kinetics-theoretical-mechanistic"><i class="fa fa-check"></i><b>5.2.4</b> Saturable growth kinetics (theoretical, mechanistic)</a></li>
<li class="chapter" data-level="5.2.5" data-path="model-machinery.html"><a href="model-machinery.html#dmi-prediction-in-nasem"><i class="fa fa-check"></i><b>5.2.5</b> DMI prediction in NASEM</a></li>
<li class="chapter" data-level="5.2.6" data-path="model-machinery.html"><a href="model-machinery.html#prediction-using-software"><i class="fa fa-check"></i><b>5.2.6</b> Prediction using software</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="model-machinery.html"><a href="model-machinery.html#optimization"><i class="fa fa-check"></i><b>5.3</b> Optimization</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="model-machinery.html"><a href="model-machinery.html#optimization-using-software"><i class="fa fa-check"></i><b>5.3.1</b> Optimization using software</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="model-machinery.html"><a href="model-machinery.html#other-important-concepts"><i class="fa fa-check"></i><b>5.4</b> Other important concepts</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="model-machinery.html"><a href="model-machinery.html#allometric-equations"><i class="fa fa-check"></i><b>5.4.1</b> Allometric equations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusions-1.html"><a href="conclusions-1.html"><i class="fa fa-check"></i><b>6</b> Conclusions</a></li>
<li class="chapter" data-level="7" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>7</b> Glossary</a></li>
<li class="divider"></li>
<b> Contributors:</b>
<li><a href="https://merickson3.github.io" target="blank">MaryGrace Erickson</a></li>
<li><a href="https://andysci.wisc.edu/directory/michel-wattiaux/" target="blank">Michel A. Wattiaux</a></li>
<li><a href="https://www.dasc.vt.edu/people/faculty/hanigan.html" target="blank">Mark D. Hanigan</a></li>
<li><a href="https://www.marinadanes.com" target="blank">Marina A.C. Danes </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning from the narrative and model in NASEM (2021) 'Nutrient Requirements of Dairy Cattle'</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-machinery" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Model machinery<a href="model-machinery.html#model-machinery" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-26"></span>
<img src="images/image-1217922456.png" alt="Re-creating a dairy cow with machinery is not as easy as you might think. Source: &lt;http://blog.modernmechanix.com&gt;" width="85%" />
<p class="caption">
Figure 5.1: Re-creating a dairy cow with machinery is not as easy as you might think. Source: <a href="http://blog.modernmechanix.com" class="uri">http://blog.modernmechanix.com</a>
</p>
</div>
<div class="lo">
<p><strong>Learning Objectives</strong></p>
<ol style="list-style-type: decimal">
<li><p>List and describe some of the "machinery" (mathematical operations) used in
nutritional models.</p></li>
<li><p>Use basic math to solve nutritional problems such as converting units, converting basis, scaling, and weighting.</p></li>
<li><p>Use a predictive model, in software, to generate estimates.</p></li>
<li><p>Discuss some of the types of predictive models used in dairy nutrition work.</p></li>
<li><p>Set up and solve a diet optimization problem.</p></li>
</ol>
</div>
<p>In the last chapter, we learned about some of the core parameters in the
NASEM model: supplies and requirements. In this chapter, we will roll up
our sleeves and look under the hood of the NASEM model to learn more
about other types of parameters beyond supplies and requirements. We
will also discuss some of the core mathematical concepts that underlie
the NASEM model functioning. The chapter is titled "Model machinery"
because it discusses some of the fundamental math that makes the NASEM
model work.</p>
<p>Nutrition involves primarily practical mathematical and statistical
problems. Animal nutritionists use nutritional modeling software to do
the "heavy lifting" for many types of calculations. We will consider
three categories of math and statistics that are used often by
nutritionists, as these also form the basis of many nutritional models.</p>
<ol style="list-style-type: decimal">
<li>Basic mathematics</li>
<li>Predictive models</li>
<li>Optimization</li>
</ol>
<div id="basic-nutrition-math" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Basic nutrition math<a href="model-machinery.html#basic-nutrition-math" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Under the hood, some parts of the NASEM model are basic operations such
as converting units, converting the basis, and scaling quantities. These
operations are based on general facts, so they are unlikely to change
with future updates to the model. For example, 1 kg will always equal
1000 g.</p>
<div id="using-ratios-percentages-proportions" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Using ratios, percentages, proportions<a href="model-machinery.html#using-ratios-percentages-proportions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some of the most frequent math problems done by nutritional scientists
are quite simple. To get started, we just need to review some elementary
math. The definitions may seem quite simple, but they can lead to huge errors if done incorrectly!</p>
<p>Relating any two quantities:</p>
<ul>
<li><strong>Ratios</strong> relate any two quantities with different units, or the same
units. Ratios can be expressed as a fraction or as a numeral. In
either case, the ratio must be expressed with units.</li>
</ul>
<p>Relating parts of a whole:</p>
<ul>
<li><p><strong>Percentages</strong> are often used to relate two quantities with the same
units and expressed as a number between 0 and 100.</p></li>
<li><p><strong>Proportions</strong> convey the same information as a percentage, except they
are expressed as a fraction of 1.</p></li>
</ul>
<p>Percentages and proportions can sometimes get confusing if there are no
units. This is why it can be helpful to explicitly state the units
rather than using the % sign. For example, the fat content of milk
(e.g., 3.7%) could be expressed equivalently as the kg of fat per 100 kg
of milk (<span class="math inline">\(\frac{3.7 \space kg \space fat}{100 \space kg \space milk}\)</span>).
The word "percent" literally translates to "per 100"! As a proportion, we could write <span class="math inline">\(\frac{0.037 \text{ kg milk fat }}{\text{1 kg milk}}\)</span>. Next time you hear a percent or proportion, ask yourself... 1) what are the numerator and denominator? 2) What are the units?</p>
<div class="green">
<p><strong>Test Yourself: </strong></p>
<ol style="list-style-type: decimal">
<li>True or false: ratios can be expressed without units. <select class='webex-select'><option value='blank'></option><option value=''>TRUE</option><option value='answer'>FALSE</option></select></li>
<li>How are percentages expressed? <select class='webex-select'><option value='blank'></option><option value=''>As a fraction</option><option value=''>As a dividend</option><option value='answer'>As a number between 0 and 100</option></select></li>
<li>True or false: ratios can be used to relate quantities with the same units? <select class='webex-select'><option value='blank'></option><option value='answer'>TRUE</option><option value=''>FALSE</option></select></li>
</ol>
</div>
</div>
<div id="converting-units" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Converting units<a href="model-machinery.html#converting-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the field, many animal producers in the U.S. use units based on both
the Imperial system (e.g., lbs, inches) and the metric system (e.g.,
grams, meters). However, most research in animal nutrition is published
using the metric system. The metric system is somewhat simpler, in that
the prefixes of a unit represents its order of magnitude relative to the
base unit (e.g., a gram). Most quantities that apply for single animal
nutritional models range from the milligram to kilogram range.</p>
<p>Nutritionists work with a variety of input data, and they often need to convert units from smaller amounts (e.g., the animal level) to larger amounts (e.g., the farm level).</p>
<table>
<thead>
<tr class="header">
<th><strong>Order of Magnitude</strong></th>
<th><strong>Prefix</strong></th>
<th><strong>Unit Value</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>pico</td>
<td>p</td>
<td>10^-12</td>
</tr>
<tr class="even">
<td>nano</td>
<td>n</td>
<td>10^-9</td>
</tr>
<tr class="odd">
<td>micro</td>
<td>µ</td>
<td>10^-6</td>
</tr>
<tr class="even">
<td>milli</td>
<td>m</td>
<td>10^-3</td>
</tr>
<tr class="odd">
<td>centi</td>
<td>c</td>
<td>10^-2</td>
</tr>
<tr class="even">
<td>deci</td>
<td>d</td>
<td>10^-1</td>
</tr>
<tr class="odd">
<td>deca</td>
<td>da</td>
<td>10^1</td>
</tr>
<tr class="even">
<td>hecto</td>
<td>h</td>
<td>10^2</td>
</tr>
<tr class="odd">
<td>kilo</td>
<td>k</td>
<td>10^3</td>
</tr>
<tr class="even">
<td>mega</td>
<td>M</td>
<td>10^6</td>
</tr>
<tr class="odd">
<td>giga</td>
<td>G</td>
<td>10^9</td>
</tr>
</tbody>
</table>
<div class="green">
<p><strong>Test yourself: Metric practice</strong></p>
<ol style="list-style-type: decimal">
<li><p>What is the mass in kg of 50 lbs feed? Use one decimals.
<input class='webex-solveme nospaces' size='4' data-answer='["22.7","22.6","22.8"]'/> kg</p></li>
<li><p>A bull has a mass of 900 kg. How many pounds does the bull weigh?
Report the whole number with no decimals. <input class='webex-solveme nospaces' size='4' data-answer='["1980"]'/> lbs.</p></li>
<li><p>If a vet prescribes 1.5 g of a medication, and each tablet contains
125 mg, how many tablets should be given? <input class='webex-solveme nospaces' size='2' data-answer='["12"]'/> tablets</p></li>
</ol>
<div class="webex-solution">
<button>
Show explanations
</button>
<ol style="list-style-type: decimal">
<li><p>50 lbs * (1 kg/ 2.2 lb) = 22.68 kg</p></li>
<li><p>900 * 2.2 = 1980</p></li>
<li><p>1,500 mg * (1 tablet / 125 mg) = 12 tablets</p></li>
</ol>
</div>
</div>
</div>
<div id="converting-basis" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Converting basis<a href="model-machinery.html#converting-basis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In animal nutrition, almost everything from feed to animal tissues
contains water. The water content can vary substantially. Although water
is important in nutrition, nutritionists generally do calculations on a
dry matter basis. This means that quantities are expressed as a fraction
of the non-water (dry matter) content, rather than as a fraction of the
total.</p>
<div class="figure">
<img src="images/DM%20illustration.png" alt="" />
<p class="caption">Feed as-is and dry matter contents, illustrating how a fraction C can
be thought of on a different basis.</p>
</div>
<p>For a nutrient called C, the proportion of C on an as-is basis is calculated as the mass of C divided by the total mass including wet and dry matter.</p>
<p><span class="math display">\[
\text{As-is basis }= \frac{\text{mass of C}}{\text{total mass of water and dry matter}}
\]</span></p>
<p>To calculate the proportion of C on a DM basis, we divide the mass of C by the mass of DM, ignoring the wet matter.
<span class="math display">\[
\text{DM basis }= \frac{\text{mass of C}}{\text{ mass of dry matter }}
\]</span></p>
<p>Most of the NASEM predictions are done on a dry matter
<strong>basis.</strong> This means that quantities are expressed in relation to the dry
matter content of a feed (as fractions of the dry matter content). For
some feeds, it makes an enormous difference whether nutrient composition
is expressed on a DM basis vs. as-is basis (e.g., corn silage, grass
silage). For other feeds, it makes no difference at all (e.g.,
limestone, iron oxide) because the feed contains very minimal water.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="85%" style="display: block; margin: auto;" /></p>
<p>To convert nutrient content from an as-is basis to a DM basis, we need
to know:</p>
<ol style="list-style-type: decimal">
<li><p>The DM content of the feed</p></li>
<li><p>The nutrient content of the feed</p></li>
</ol>
<p>It can help to write down everything you know, including units.</p>
<p><span class="math display">\[15 \text{ %CP, as-is basis} = \frac{\text{15 kg feed CP}}{\text{100 kg feed as-is}} \\[16pt]
50\text{% DM as-is basis} = \frac{50 \text{ kg feed DM}}{100\text{ kg feed DM}}\]</span></p>
<p>To convert to a DM basis, we need to think about our desired units: kg
CP / kg DM. Thinking backwards, we can use the other information we have
(the DM content of the feed). Ratios are useful, because we can invert
them (flip them) whichever way we need, as long as we keep track of the
units.</p>
<p><span class="math display">\[\begin{aligned}
\frac{\text{15 kg feed CP}}{\text{100 kg feed as-is}} * \frac{\text{100 kg feed as-is}}{\text{50 kg feed DM}} &amp;=\\[6pt] \frac{15 \text{ kg feed CP}}{50 \text{kg feed DM}}&amp; = \\[6pt]
\frac{30 \text{ kg feed CP}}{100 \text{ kg feed DM}} &amp;= 30 \text{% CP on a DM basis}
\end{aligned}\]</span></p>
<p>To go in the reverse direction, we can convert back to an as-is basis.
<span class="math display">\[
\begin{aligned}
\frac{\text{30 kg feed CP}}{\text{100 kg feed DM}} * \frac{\text{50 kg feed DM}}{\text{100 kg feed as-is}} &amp;=\\[6pt]
\frac{30 * 50 \text{ kg feed CP}}{100*100 \text{ kg feed as-is} } &amp;= \\[6pt] \frac{0.15 \text{ kg feed CP}} {1 \text{ kg feed as-is}} = \frac{15 \text{ kg feed CP}} {100 \text{ kg feed as-is}} &amp;= 15 \text{ % CP as-is}\\[6pt]
\end{aligned}
\]</span></p>
<p>Here's the kicker - the dry matter basis is not the only basis used in
nutrition. Sometimes nutrient content is expressed in relation to other
quantities. For example, in field work, nutritionists sometimes refer to
the rumen-degradable and rumen-undegradable fractions of crude protein.
Therefore, these fractions are not expressed per 100 units of feed dry
matter, they are expressed per 100 units of feed CP. Nutrient
digestibility is typically given as a percentage of that particular
nutrient intake (e.g., fiber digestibility as a percentage of fiber
intake). Therefore, it is critical to keep track of the units in the
numerator and denominator when doing any sort of nutrition calculations
to prevent errors.</p>
<div class="green">
<p><strong>Test yourself</strong> Assuming the feed contains water, the amount of a
nutrient on a DM basis is
<select class='webex-select'><option value='blank'></option><option value=''>less than</option><option value='answer'>greater than</option></select> the amount on an as-is
basis.</p>
</div>
<div class="green">
<p><strong>Test yourself</strong> A nutritionist is given the crude protein (CP) content
of a feed on an as-is basis.</p>
<p>CP% as-is = 8%</p>
<p>Because most nutritional calculations are done on a DM basis, they want
to convert this value to a DM basis. What other information do they
need?
<select class='webex-select'><option value='blank'></option><option value=''>amount of feed in ration</option><option value='answer'>dry matter content of the feed</option><option value=''>weight of the feed</option></select></p>
<p>Try to do the conversion of the as-is to DM basis yourself, assuming the
DM content of the feed is 35%.</p>
<div class="webex-solution">
<button>
click here for the answer
</button>
<p>CP % as-is = 8% DM content of the feed = 35%</p>
<p>(8% ) * (100 / 35) = 22.8% CP on a DM basis</p>
</div>
</div>
<div class="grey">
<p><strong>Additional literature</strong> For some extra practice and visualizations of
DM and as-is basis calculations, check out this resource by Reiling
(2022) and the University of Nebraska Extension:</p>
<p><a href="https://extensionpublications.unl.edu/assets/html/g2093/build/g2093.htm" class="uri">https://extensionpublications.unl.edu/assets/html/g2093/build/g2093.htm</a></p>
</div>
</div>
<div id="scaling" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Scaling<a href="model-machinery.html#scaling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scaling involves multiplying every element of a vector or matrix by the same, single number. Incidentally, this is why one single number is sometimes referred to as a "scalar."</p>
<p>Often, operations in the NASEM model simply involve scaling chemical
composition (e.g., the percentages of each chemical in a feed or body
pool) to amounts.</p>
<p>For example, we can scale the diet composition by the DMI to determine
the amount of intake of each nutrient.</p>
<p><span class="math display">\[{kg \space DMI \space*
\begin{bmatrix}
\text{% ADF in diet}\\
\text{% NDF in diet} \\
\text{% CP in diet} \\
\text{% Fat in diet} \\
\text{% Ash in diet}
\end{bmatrix} /100
=  
\begin{bmatrix}
\text{kg ADF intake}\\
\text{kg NDF intake} \\
\text{kg CP intake} \\
\text{kg Fat intake} \\
\text{kg Ash intake}
\end{bmatrix}}\]</span></p>
<div class="green">
<p><strong>Scaling milk composition to amounts</strong></p>
<p>Producers typically have information about the fat, protein, and lactose
composition of milk (%) and the mass of milk produced (kg or lb). By
scaling the composition using the total amount, we can calculate the
amounts of fat, protein, and lactose production.</p>
<p>Given the following information:</p>
<p>Fat = 3.85% True protein = 3.10% Lactose = 4.65%</p>
<p>Milk production = 36 kg</p>
<p>Calculate the amounts of fat, true protein, and lactose produced.</p>
<div class="webex-solution">
<button>
Click here for an answer
</button>
<p>The problem can be set up as follows:
$${ kg Milk production </p>
<span class="math display">\[\begin{bmatrix}
\text{% Fat in milk} \\
\text{% True protein in milk}\\
\text{% Lactose in milk} \\
\end{bmatrix}\]</span>
<p>/100 =</p>
<span class="math display">\[\begin{bmatrix}  
\text{kg Fat production} \\
\text{kg True protein production}\\
\text{kg Lactose production} \\
\end{bmatrix}\]</span>
<p>}$$</p>
<p>Using this formula, we would calculate as follows:</p>
<p>36 * 3.85 / 100 = 1.386 kg fat 36 * 3.10 / 100 = 1.116 kg true protein
36 * 4.65 / 100 = 1.674 kg lactose</p>
</div>
</div>
</div>
<div id="weighting" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Weighting<a href="model-machinery.html#weighting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Weighting involves multiplying each element of a set of values with its corresponding element in a set of weights. Weighted sums and weighted means are common in animal nutrition. For example,
weighted means are used to calculate diet composition
from ingredient composition and ingredient inclusion rates.</p>
<p>A weighted sum is the sum of the products of a set of values (<span class="math inline">\(x\)</span>) and weights (<span class="math inline">\(w\)</span>).</p>
<p><span class="math display">\[ \text{Weighted sum}= \sum_{i = 1}^{n \space feeds} w_ix_i \]</span>
<span class="math inline">\(x_i\)</span> is the value to be weighted (e.g., nutrient composition of feed <span class="math inline">\(i\)</span>)</p>
<p><span class="math inline">\(w_i\)</span> is the weight (e.g., the inclusion rate of feed <span class="math inline">\(i\)</span>)</p>
<p>To calculate a weighted mean, we divide the weighted sum (the numerator) by the sum of the weights.</p>
<p><span class="math display">\[ \text{Weighted mean}= \frac{\sum_{i = 1}^{n} w_ix_i}{\sum_{i=1}^{n} w_i} \]</span></p>
<p>where <span class="math inline">\(x_i\)</span> is the <span class="math inline">\(i\)</span>th value, and <span class="math inline">\(w_i\)</span> is the weight corresponding to <span class="math inline">\(x_i\)</span>. If the weights are expressed as proportions (out of 1), the weighted mean and weighted sum are equivalent because the denominator is 1. If the weights are expressed as percentages (out of 100), or some other way, the denominator is more important.</p>
<p>As an example, for a given diet, we could multiply the fat content of
each feed by the inclusion rate of each feed (as a proportion). Then, we
would sum up all of the values to get the fat content of the diet.</p>
<div class="green">
<p><strong>Calculating diet fat content with a weighted mean</strong></p>
<p>A diet includes 45% corn silage, 20% alfalfa silage and 35% concentrate
mix (inclusion rates). The fat content of these feeds are: Corn silage,
fat = 2.5% of DM Alfalfa silage, fat = 2.0% of DM Concentrate mix, fat =
9.0% of DM.</p>
<p>What is the fat content of the diet?</p>
<div class="webex-solution">
<button>
click here for a worked example
</button>
<p>Calculate each (<span class="math inline">\(w_i x_i\)</span>) for the n = 3 feeds. 0.45 * 2.5 = 1.125 0.20
* 2.0 = 0.40 0.35 * 9.0 = 3.15</p>
<p>Sum the <span class="math inline">\(w_i x_i\)</span> for the n = 3 feeds. 1.125 + 0.40 + 3.15 = 4.675</p>
</div>
</div>
</div>
</div>
<div id="predictive-models" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Predictive models<a href="model-machinery.html#predictive-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another set of mathematical operations in nutrition stems from
predictive models. Predictive models are equations that stem from
statistical analysis of nutritional data through techniques such as
regression. Each equation embodies the relationships among dependent (Y)
and independent (X) variables. Using a predictive model is simple...plug
known values (Xs) into the equation to solve for the unknown (Y)
variable. When new data become available, nutritionists will often want
to update the predictive models. As a result, the sections of
nutritional models that have been developed through statistical analysis
are continually changing.</p>
<div id="predictive-model-descriptors" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Predictive model descriptors<a href="model-machinery.html#predictive-model-descriptors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Empirical vs. theoretical</strong>
Empirical and theoretical are two ends of a spectrum used to describe
models. These terms refer to the way in which a model was developed.
When a model is more empirical, it is typically based on observed data
and simple relationships. The word "empirical" means that it is based on experience. Conversely, theoretical models are more based on logic and abstract ideas, rather than observations in practice.</p>
<p><strong>Input-output vs. mechanistic</strong>
Some models are concerned only with observed inputs and outputs. Their structure is something like INPUT -&gt; Black Box -&gt; OUTPUT, meaning that the mechanisms between input and output are not well-characterized. These models are often more empirical rather than theoretical. Conversely, when a model is
more <strong>mechanistic</strong>, it depicts the processes and intermediates in
great detail. Mechanistic models can be thought of as INPUT -&gt; Detailed
Process -&gt; OUTPUT models. Mechanistic models often involve more theory.</p>
<p>These terms are used in the NASEM narrative and more broadly to describe the types of predictive models. Most predictive models are some combination of the terms above. In other words, models fall somewhere on a spectrum rather than splitting into discrete categories.</p>
<div class="lo">
<p><strong>Test yourself</strong></p>
<p>A (An) <select class='webex-select'><option value='blank'></option><option value=''>input-output</option><option value='answer'>mechanistic</option></select> model represents processes in great detail.</p>
<p>An <select class='webex-select'><option value='blank'></option><option value='answer'>empirical</option><option value=''>imperial</option></select> model is based on observed relationships.</p>
</div>
</div>
<div id="simple-linear-model-empirical-input-output" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Simple linear model (empirical, input-output)<a href="model-machinery.html#simple-linear-model-empirical-input-output" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As an example, we previously used a predictive model: <span class="math inline">\(DMI \space (kg) = 0.03 * BW\)</span>. To use it, we plugged in known values to the right-hand side (independent variables).</p>
<p><span class="math inline">\(DMI\)</span> = ?</p>
<p><span class="math inline">\(0.03\)</span> a coefficient relating DMI and BW determined in past research</p>
<p><span class="math inline">\(BW\)</span> = 702</p>
<p><span class="math inline">\(DMI = 0.03*702\)</span></p>
<p><span class="math inline">\(DMI = 21.06 kg\)</span></p>
<p>This model is more empirical, because it is based on observations. It is more input-output, because it does not represent any of the reasons or mechanisms behind why greater BW could lead to greater DMI.</p>
</div>
<div id="exponential-growth-kinetic-model-theoretical-mechanistic" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Exponential growth kinetic model (theoretical, mechanistic)<a href="model-machinery.html#exponential-growth-kinetic-model-theoretical-mechanistic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="green">
<p><strong>Think to yourself</strong></p>
<p>If you raised a newborn calf to its mature weight, and weighed it every day, what would it look like to plot its weight (Y) over time (X)? How would its growth rate (mass/time) change as it got larger?</p>
</div>
<p>The rate:state equation tells us the growth rate. The growth rate is
expressed here as the difference in mass (<span class="math inline">\(dM\)</span>) per the difference in
time (<span class="math inline">\(dt\)</span>). This is referred to as first order kinetics, because the
mass (<span class="math inline">\(M\)</span>) is multiplied by a scalar <span class="math inline">\(a^1 = a\)</span>.</p>
<p><span class="math display">\[ \frac{dM}{dt} = a M \]</span></p>
<p>where <span class="math inline">\(a\)</span> is the growth constant. This equation suggests that as the
mass grows, the "growth machinery" also grows. In other words, an animal
that weighs 50 lbs might grow 0.5 lbs per day, but an animal at 500 lbs
would grow at a faster rate (5 lbs per day) proportional to its mass.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="85%" style="display: block; margin: auto;" /></p>
<p>Integrating the rate:state equation (finding the area underneath it)
allows us to find the mass at any point in time. We find the definite
integral from the start of the process <span class="math inline">\(t = 0\)</span> to another point in time
<span class="math inline">\(t = t_1\)</span>. The integral tells us that the mass at a given time <span class="math inline">\(M\)</span> is
equal to the initial mass <span class="math inline">\(M_0\)</span> times the exponential of <span class="math inline">\(at\)</span>, the
growth constant multiplied by time.</p>
<p><span class="math display">\[
M = M_0e^{at}
\]</span></p>
<p>Functions similar to this integrated rate law appear in the NASEM model
to predict the growth rate of the fetus during gestation. Importantly,
the function is cut off after the time of calving (otherwise, the mass
would continue to increase!).</p>
<div class="green">
<p><strong>Test yourself</strong></p>
<ol style="list-style-type: decimal">
<li><p>First order kinetics means that the mass grows at a
constant rate. <select class='webex-select'><option value='blank'></option><option value=''>TRUE</option><option value='answer'>FALSE</option></select></p></li>
<li><p>The exponential function (integrated
rate equation) shown above would slow down after enough time had passed.
<select class='webex-select'><option value='blank'></option><option value=''>TRUE</option><option value='answer'>FALSE</option></select></p></li>
</ol>
</div>
<div class="grey">
<p><strong>Literature deep dive</strong></p>
<p>France et al. (1996) described growth rates in animal science.</p>
<p>France, J., Dijkstra, J., &amp; Dhanoa, M. S. (1996). Growth functions and
their application in animal science. In Annales de zootechnie (Vol. 45,
No. Suppl1, pp. 165-174).</p>
</div>
</div>
<div id="saturable-growth-kinetics-theoretical-mechanistic" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Saturable growth kinetics (theoretical, mechanistic)<a href="model-machinery.html#saturable-growth-kinetics-theoretical-mechanistic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Michaelis-Menten model describes a saturable growth process. A function
is saturable when it reaches an upper or lower bound rather than
continuing infinitely. This form of growth is used in NASEM to model microbial protein synthesis.</p>
<p>The Michaelis-Menten equation uses the term velocity, which is a general term encompassing the changes in products <span class="math inline">\(\frac{d[P]}{dt}\)</span> and substrates <span class="math inline">\(\frac{d[S]}{dt}\)</span> over time.</p>
<p><span class="math display">\[v = \frac{V_{max} [S]}{K_m + [S]}\]</span>
where
<span class="math inline">\(V\)</span> is the growth rate</p>
<p><span class="math inline">\(S\)</span> is the substrate concentration</p>
<p><span class="math inline">\(V_{max}\)</span> is the maximum velocity (max. reaction rate) and <span class="math inline">\(V_{max}/2\)</span> is half the maximum velocity. The velocity is <span class="math inline">\(V_{max}/2\)</span> when <span class="math inline">\(K_m = [S]\)</span>.</p>
<p><span class="math inline">\(K_m\)</span> is the Michaelis constant, which is the concentration of substrate when the reaction velocity is 50% of the <span class="math inline">\(V_{max}\)</span></p>
<p>At low concentrations the velocity is proportional to the concentration of substrate <span class="math inline">\(S\)</span>. One way to think of this is that <span class="math inline">\(K_m\)</span> is larger than <span class="math inline">\([S]\)</span>, so <span class="math inline">\(K_m + [S] \approx K_m\)</span>, so the velocity is affected by the ratio of <span class="math inline">\(\frac{[S]}{K_m}\)</span> times the maximum velocity. This is similar to first-order kinetics, where the growth rate (velocity) is a linear function of the growth machinery (e.g., the substrate concentration). At this point, the growth is not saturated.</p>
<p>At high concentrations of substrate <span class="math inline">\(S\)</span>, the rate approaches a maximum velocity. This is because <span class="math inline">\([S]\)</span> has become larger than <span class="math inline">\(K_m\)</span>, and <span class="math inline">\(K_m + [S] \approx [S]\)</span>. The rate is <span class="math inline">\(\frac{[S]}{[S]}\)</span> times the maximum velocity ($ * V_{max}$. This is more similar to zeroth-order kinetics, because the growth rate is constant. The growth process becomes saturated as it gets closer and closer to <span class="math inline">\(V_{max}\)</span>.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="85%" style="display: block; margin: auto;" /></p>
<div class="orange">
<p><strong>Feeling confused? Click below for a more practical example.</strong> 🍞</p>
<div class="webex-solution">
<button>
Tell me an analogy on saturable growth
</button>
<p>Imagine you owned a bakery of a certain size with 13 dedicated bakers (a baker's dozen! 👨‍🍳). You are in charge of providing the bakers ingredients (substrates).</p>
<p>At first you give them no ingredients. The bakers make no bread, and sit around the bakery all day.</p>
<p>Then, you decide to start giving them a small amount of ingredients every day. They are very excited and make as much bread as they can using the ingredients. At the end of the day, they still have some time to relax. The bakers send you a note - "We would be happy to make more bread if you give us more ingredients."</p>
<p>You increase the amount of ingredients provided per day. The bakers are still very excited, and they make even more bread than ever before. They have less time to relax. At this stage, you start to think that the amount of bread made is proportional to the amount of ingredients provided. This is great news, you think, because if you simply provide more ingredients to the bakers, everyone will get more bread.</p>
<p>You tell the bakers - it's time to push it to the limit. You offer them thousands of pounds of ingredients to use as fast as they can. The bakers spend all day making as much bread as they can, but at the end of the day there are still ingredients leftover. They can't seem to catch up! You keep giving them more ingredients, expecting more bread. The bakers work as fast as they can. In desperation, the bakers finally send you an angry note - "There is a limit to how fast we can make bread!!!"</p>
</div>
</div>
</div>
<div id="dmi-prediction-in-nasem" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> DMI prediction in NASEM<a href="model-machinery.html#dmi-prediction-in-nasem" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let's take a look at an actual predictive models in NASEM. For example, an equation for predicting DMI in NASEM (p. 12, eq. 2-1) uses parity, BW, body condition score (BCS), day in lactation, and milk net energy production. Researchers observed 3,143 lactations where roughly
half the observations represented primiparous cows and half were from
multiparous cows. After testing different equations, they found one that
provided a good fit with the data:</p>
<p><span class="math display">\[\begin{aligned}
DMI (kg/d) &amp;= [3.7 + (5.7*Parity) + \\
&amp;\quad (0.305*MilkE) + \\
&amp;\quad (0.022*BW) + \\
&amp;\quad   (-0.689-1.87*Parity)*BCS]*\\
&amp;\quad  [1-(0.212+0.136*Parity)*e^{(-0.053*DIM)}]
\end{aligned}\]</span></p>
<p>Oh my! It's much more complex than our simple example. In this equation, we have a few more terms:</p>
<p><span class="math inline">\(Parity\)</span> is the proportion of cows that are multiparous (ranges from 0
to 1)</p>
<p><span class="math inline">\(BCS\)</span> is the body condition score from 1 (thin) to 5 (obese)</p>
<p><span class="math inline">\(BW\)</span> is the bodyweight in kg</p>
<p><span class="math inline">\(MilkE\)</span> is the energy produced in milk, in Mcal/d</p>
<p><span class="math inline">\(DIM\)</span> is the day in milk, an integer number of days since the start of
lactation</p>
<div class="green">
<p><strong>Test yourself</strong> Which term is the intercept in this equation?
<select class='webex-select'><option value='blank'></option><option value=''>BW</option><option value=''>1</option><option value='answer'>3.7</option></select></p>
</div>
<p>On the one hand, we can use this equation without knowing how it works...we just plug in values for the known variables and get our estimate of DMI. Woohoo! But to be responsible animal nutritionists, we should probably dig a bit deeper into the relationships implied by the equation.</p>
<p>The intercept tells us the
expected value of the dependent variable (Y) when all of the independent
variables (Xs) are set to zero. In this case, the intercept suggests that there is a small amount of DMI (3.7 kg) predicted even if all other variables are entered as zeroes.</p>
<p>Each regression coefficient describes
the magnitude and direction of a relationship between an independent
variable and the dependent variable. In this equation, there are several
terms with positive coefficients (Parity, MilkE, BW). These suggest that
a greater proportion of multiparous cows, greater milk energy
production, andg greater bodyweight are predictive of greater DMI
(positive relationship). The last part of the equation includes some
complex terms where there are interactions. In an interaction, two variables (e.g., milk production and BW) are multiplied with each other rather than added. Additionally, Euler's constant <span class="math inline">\(e\)</span> appears in the expression <span class="math inline">\(e^{(-0.053*DIM)}\)</span>. This part is an adjustment for depressed intake in early lactation.</p>
</div>
<div id="prediction-using-software" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Prediction using software<a href="model-machinery.html#prediction-using-software" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Although this math can be done on paper or with a calculator, if you are so inclined, you can try this in your favorite computer program. The program makes it easier to plug in values and generate an estimate.</p>
<div class="webex-solution">
<button>
NASEM dairy-8 Example
</button>
<div id="nasem-dairy-8" class="section level4 hasAnchor" number="5.2.6.1">
<h4><span class="header-section-number">5.2.6.1</span> NASEM dairy-8<a href="model-machinery.html#nasem-dairy-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Open the dairy-8 program.</li>
<li>Click File &gt; Load Simulation and load an example simulation for a lactating cow, such as "Example-Lactating-Cow-DIM-100.nd8"</li>
<li>Click to the "Animal Description/Management" tab in Inputs.</li>
<li>Enter the following information</li>
</ol>
<ul>
<li>Percent first parity = 100 - the percent of multiparous cows</li>
<li>Mature weight = 700 kg</li>
<li>Condition score = 3.5</li>
<li>Days in Milk = 100</li>
</ul>
<ol style="list-style-type: decimal">
<li>Click the "Production" tab in Inputs. Enter Milk Production = 42.64 kg, which is the equivalent of 29 Mcal milk net energy using the default milk component concentrations.</li>
<li>Click the square at the top for the Ration. At the bottom of the screen, you will see "Estimated Intake Based on Animal. This is the estimated DMI given the input data.</li>
</ol>
</div>
</div>
<div class="webex-solution">
<button>
R Example
</button>
<div id="r" class="section level4 hasAnchor" number="5.2.6.2">
<h4><span class="header-section-number">5.2.6.2</span> R<a href="model-machinery.html#r" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="model-machinery.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to estimate DMI using the NASEM equation</span></span>
<span id="cb3-2"><a href="model-machinery.html#cb3-2" aria-hidden="true" tabindex="-1"></a>DMI_est <span class="ot">&lt;-</span> <span class="cf">function</span>(Parity, BW, BCS, DIM, MilkE) {</span>
<span id="cb3-3"><a href="model-machinery.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-4"><a href="model-machinery.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  Dt_DMIn_Lact1 <span class="ot">&lt;-</span> (<span class="fl">3.7</span> <span class="sc">+</span> <span class="fl">5.7</span> <span class="sc">*</span> Parity <span class="sc">+</span></span>
<span id="cb3-5"><a href="model-machinery.html#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.305</span> <span class="sc">*</span> MilkE <span class="sc">+</span> <span class="fl">0.022</span> <span class="sc">*</span> BW <span class="sc">+</span></span>
<span id="cb3-6"><a href="model-machinery.html#cb3-6" aria-hidden="true" tabindex="-1"></a>    (<span class="sc">-</span><span class="fl">0.689</span> <span class="sc">-</span> <span class="fl">1.87</span> <span class="sc">*</span> Parity) <span class="sc">*</span> BCS) <span class="sc">*</span></span>
<span id="cb3-7"><a href="model-machinery.html#cb3-7" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">-</span> (<span class="fl">0.212</span> <span class="sc">+</span> <span class="fl">0.136</span> <span class="sc">*</span> Parity) <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.053</span> <span class="sc">*</span> DIM))</span>
<span id="cb3-8"><a href="model-machinery.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-9"><a href="model-machinery.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(Dt_DMIn_Lact1)</span>
<span id="cb3-10"><a href="model-machinery.html#cb3-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-11"><a href="model-machinery.html#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="model-machinery.html#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Define inputs for the function (PLUG IN YOUR OWN VALUES HERE)</span></span>
<span id="cb3-13"><a href="model-machinery.html#cb3-13" aria-hidden="true" tabindex="-1"></a>Parity <span class="ot">=</span> <span class="dv">1</span> <span class="co"># proportion of multiparous cows</span></span>
<span id="cb3-14"><a href="model-machinery.html#cb3-14" aria-hidden="true" tabindex="-1"></a>MilkE <span class="ot">=</span> <span class="dv">29</span> <span class="co"># milk net energy, Mcal</span></span>
<span id="cb3-15"><a href="model-machinery.html#cb3-15" aria-hidden="true" tabindex="-1"></a>BW <span class="ot">=</span> <span class="dv">700</span> <span class="co"># animal BW, kg</span></span>
<span id="cb3-16"><a href="model-machinery.html#cb3-16" aria-hidden="true" tabindex="-1"></a>BCS <span class="ot">=</span> <span class="fl">3.5</span> <span class="co"># animal Body condition score, 1 (thin) to 5 (obese)</span></span>
<span id="cb3-17"><a href="model-machinery.html#cb3-17" aria-hidden="true" tabindex="-1"></a>DIM <span class="ot">=</span> <span class="dv">100</span> <span class="co"># days in milk, d</span></span>
<span id="cb3-18"><a href="model-machinery.html#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="model-machinery.html#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function</span></span>
<span id="cb3-20"><a href="model-machinery.html#cb3-20" aria-hidden="true" tabindex="-1"></a>est_DMI_kg <span class="ot">=</span> <span class="fu">DMI_est</span>(<span class="at">Parity =</span> Parity, </span>
<span id="cb3-21"><a href="model-machinery.html#cb3-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">MilkE =</span> MilkE,</span>
<span id="cb3-22"><a href="model-machinery.html#cb3-22" aria-hidden="true" tabindex="-1"></a>                   <span class="at">BW =</span> BW, </span>
<span id="cb3-23"><a href="model-machinery.html#cb3-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">BCS =</span> BCS, </span>
<span id="cb3-24"><a href="model-machinery.html#cb3-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">DIM =</span> DIM)</span>
<span id="cb3-25"><a href="model-machinery.html#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb3-26"><a href="model-machinery.html#cb3-26" aria-hidden="true" tabindex="-1"></a>est_DMI_kg</span></code></pre></div>
</div>
</div>
<div class="webex-solution">
<button>
Python example
</button>
<div id="python" class="section level4 hasAnchor" number="5.2.6.3">
<h4><span class="header-section-number">5.2.6.3</span> Python<a href="model-machinery.html#python" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="model-machinery.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to estimate DMI using the NASEM equation</span></span>
<span id="cb4-2"><a href="model-machinery.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> DMI_est(Parity, BW, BCS, DIM, MilkE):</span>
<span id="cb4-3"><a href="model-machinery.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    Dt_DMIn_Lact1 <span class="op">=</span> (<span class="fl">3.7</span> <span class="op">+</span> <span class="fl">5.7</span> <span class="op">*</span> Parity <span class="op">+</span></span>
<span id="cb4-4"><a href="model-machinery.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fl">0.305</span> <span class="op">*</span> MilkE <span class="op">+</span> <span class="fl">0.022</span> <span class="op">*</span> BW <span class="op">+</span></span>
<span id="cb4-5"><a href="model-machinery.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                     (<span class="op">-</span><span class="fl">0.689</span> <span class="op">-</span> <span class="fl">1.87</span> <span class="op">*</span> Parity) <span class="op">*</span> BCS) <span class="op">*</span> <span class="op">\</span></span>
<span id="cb4-6"><a href="model-machinery.html#cb4-6" aria-hidden="true" tabindex="-1"></a>                    (<span class="dv">1</span> <span class="op">-</span> (<span class="fl">0.212</span> <span class="op">+</span> <span class="fl">0.136</span> <span class="op">*</span> Parity) <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.053</span> <span class="op">*</span> DIM))</span>
<span id="cb4-7"><a href="model-machinery.html#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Dt_DMIn_Lact1</span>
<span id="cb4-8"><a href="model-machinery.html#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="model-machinery.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-10"><a href="model-machinery.html#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="model-machinery.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define inputs for the function (PLUG IN YOUR OWN VALUES HERE)</span></span>
<span id="cb4-12"><a href="model-machinery.html#cb4-12" aria-hidden="true" tabindex="-1"></a>Parity <span class="op">=</span> <span class="dv">1</span> <span class="co"># proportion of multiparous cows</span></span>
<span id="cb4-13"><a href="model-machinery.html#cb4-13" aria-hidden="true" tabindex="-1"></a>MilkE <span class="op">=</span> <span class="dv">29</span> <span class="co"># milk net energy, Mcal</span></span>
<span id="cb4-14"><a href="model-machinery.html#cb4-14" aria-hidden="true" tabindex="-1"></a>BW <span class="op">=</span> <span class="dv">700</span> <span class="co"># animal BW, kg</span></span>
<span id="cb4-15"><a href="model-machinery.html#cb4-15" aria-hidden="true" tabindex="-1"></a>BCS <span class="op">=</span> <span class="fl">3.5</span> <span class="co"># animal Body condition score, 1 (thin) to 5 (obese)</span></span>
<span id="cb4-16"><a href="model-machinery.html#cb4-16" aria-hidden="true" tabindex="-1"></a>DIM <span class="op">=</span> <span class="dv">100</span> <span class="co"># days in milk, d</span></span>
<span id="cb4-17"><a href="model-machinery.html#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="model-machinery.html#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function</span></span>
<span id="cb4-19"><a href="model-machinery.html#cb4-19" aria-hidden="true" tabindex="-1"></a>est_DMI_kg <span class="op">=</span> DMI_est(Parity <span class="op">=</span> Parity, </span>
<span id="cb4-20"><a href="model-machinery.html#cb4-20" aria-hidden="true" tabindex="-1"></a>                     MilkE <span class="op">=</span> MilkE,</span>
<span id="cb4-21"><a href="model-machinery.html#cb4-21" aria-hidden="true" tabindex="-1"></a>                     BW <span class="op">=</span> BW, </span>
<span id="cb4-22"><a href="model-machinery.html#cb4-22" aria-hidden="true" tabindex="-1"></a>                     BCS <span class="op">=</span> BCS, </span>
<span id="cb4-23"><a href="model-machinery.html#cb4-23" aria-hidden="true" tabindex="-1"></a>                     DIM <span class="op">=</span> DIM)</span>
<span id="cb4-24"><a href="model-machinery.html#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="model-machinery.html#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb4-26"><a href="model-machinery.html#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(est_DMI_kg)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="optimization" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Optimization<a href="model-machinery.html#optimization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Nutritionists sometimes use mathematical techniques for optimization.
Optimization involves writing an objective function describing the goal
(e.g., the lowest cost ration, the most environmentally-favorable ration),
listing out a set of constraints (e.g., nutrient requirements, available feeds), and using an optimization
technique (e.g., linear optimization) to find the best possible
solution(s). As an example, we could write an objective function that minimizes the total cost of a ration containing <span class="math inline">\(n\)</span> feeds, where each feed <span class="math inline">\(i\)</span> has its own cost <span class="math inline">\(c_i\)</span> and a certain inclusion rate <span class="math inline">\(x_i\)</span> in the diet.</p>
<p>The "objective" function is a mathematical way of stating our ultimate goal (our objective).</p>
<p><span class="math display">\[
\begin{equation*}
\text{minimize } \sum_{i=1}^{n_i} c_i x_i
\end{equation*}
\]</span>
In other words if we have several feeds numbered 1 to <span class="math inline">\(n\)</span>, we want to minimize the sum of the total diet cost. The total diet cost is calculated by weighting the feed ingredient costs (<span class="math inline">\(c_i\)</span>) by the feed ingredient inclusion rate <span class="math inline">\(x_i\)</span>.</p>
<p><span class="math display">\[= \text{minimize  }   c_1x_1 + c_2x_2 + ... + c_nx_n \]</span></p>
<p>Next, we can write some constraints that express mathematically what we consider feasible diets. For example, we may want the nutrient composition to fall within a certain range. On a DM basis, we know that:</p>
<ul>
<li><p>Feed 1 is 10% protein and 40% NDF.</p></li>
<li><p>Feed 2 is 30% protein and 10% NDF.</p></li>
<li><p>Feed 3 is 50% protein and 30% NDF.</p></li>
</ul>
<p>Weighting by the inclusion rates, we can write an equation for the protein and NDF concentration in the diet:
Diet protein concentration (% of DM) = <span class="math inline">\(10x_1 + 30x_2 + 50x_3\)</span>
Diet NDF concentration (% of DM) = $40x_1 + 10x_2 + 30x_3 $
Then we can set these equations to be greater or less than certain numbers to constrain the diet composition.</p>
<p>We want our inclusion rates to add up to 1 so we have the proportion of each feed entering the diet. Clearly, we cannot have negative inclusion rates for any feeds, so we need to add constraints to make sure all inclusion rates are greater than or equal to zero.</p>
<p>To summarize the constraints:</p>
<p><span class="math display">\[
\begin{align*}
\text{Protein concentration} \quad &amp; 10x_1 + 30x_2 + 50x_3 \geq 15 \\
\text{NDF concentration} \quad &amp; 40x_1 + 10x_2 + 30x_3 \geq 25 \\
\text{NDF concentration} \quad &amp; 40x_1 + 10x_2 + 30x_3 \leq 35 \\
\text{Ingredient proportions sum} \quad &amp; x_1 + x_2 + x_3 = 1 \\
\text{amount of ingredients cannot be negative} \quad &amp;
\begin{cases}
x_1 \geq 0 \\
x_2 \geq 0 \\
x_3 \geq 0
\end{cases}
\end{align*}
\]</span></p>
<div class="figure">
<img src="images/Feasible%20region%20optimization.png" width="377" alt="" />
<p class="caption">Feasible region for optimization
example.</p>
</div>
<p>Only certain combinations of x1, x2, and x3 are feasible given our constraints.
In three dimensions, our constraint equations form a polygonol plane - the feasible region. Unfeasible combinations that do not meet the constraints we specified fall outside
of the blue shape. If we had more than three ingredients, we would have more than three dimensions, which becomes difficult to imagine. The constraints would form a polyhedron in n-dimensional space.</p>
<p>Set up as amounts per 100 kg of feed (in nutrient matrix and others)
also get costs per 100 kg feed.</p>
<p>Finally, to optimize, we need to know our feed costs (USD / kg feed DM). As usual, it is very important to keep track of the units and the basis (dry matter or as-is).</p>
<ul>
<li><p>Feed 1 = $0.15</p></li>
<li><p>Feed 2 = $0.20</p></li>
<li><p>Feed 3 = $0.50</p></li>
</ul>
<div class="grey">
<p><strong>Literature deep dive</strong></p>
<p>Optimization is used widely in finance, engineering, economics, and
other fields. Yet some of the first recorded uses of linear optimization
are for nutrition.</p>
<p>For example, during World War II, the mathematician George Dantzig took
a leave from his doctoral program to serve as an analyst for the U.S.
Air Force. Tasked with finding affordable and nutritionally-adequate
meals, Dantzig used his mathematics training to design an algorithm that
is still widely-used today. As summarized by Van Dooren (2018):</p>
<blockquote>
<p>Dantzig tested his model on his own diet, constructing a database with
50 foods. He wanted to reduce his caloric intake to 1,500 kcal and
programmed an objective function to maximize the feeling of being full
(operationalized as the weight per unit minus the weight of its water
content). The solution he found was a weird diet with 200 bouillon
cubes per day. This was possible because the former nutritional
requirements didn't show a limit to the amount of salt. These results
led to upper bounds being added to LP for the first time.</p>
</blockquote>
<p>This illustrates the complexity of setting up optimization problems, and
the necessity for double-checking that the results are applicable to the
real world!</p>
<p>Van Dooren, C. (2018). A review of the use of linear programming to
optimize diets, nutritiously, economically and environmentally.
<em>Frontiers in nutrition</em>, <em>5</em>, 48.
<a href="https://doi.org/10.3389/fnut.2018.00048" class="uri">https://doi.org/10.3389/fnut.2018.00048</a></p>
</div>
<div id="optimization-using-software" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Optimization using software<a href="model-machinery.html#optimization-using-software" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are so inclined, the optimization problem can be solved in R.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="model-machinery.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lpSolve)</span>
<span id="cb5-2"><a href="model-machinery.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="model-machinery.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix of nutrient values for each feed (col) and each nutrient (row)</span></span>
<span id="cb5-4"><a href="model-machinery.html#cb5-4" aria-hidden="true" tabindex="-1"></a>nutrient_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="co"># protein</span></span>
<span id="cb5-5"><a href="model-machinery.html#cb5-5" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">30</span>,  <span class="co"># NDF</span></span>
<span id="cb5-6"><a href="model-machinery.html#cb5-6" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">30</span>, <span class="co"># NDF of x1, x2, x3</span></span>
<span id="cb5-7"><a href="model-machinery.html#cb5-7" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb5-8"><a href="model-machinery.html#cb5-8" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, </span>
<span id="cb5-9"><a href="model-machinery.html#cb5-9" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, </span>
<span id="cb5-10"><a href="model-machinery.html#cb5-10" aria-hidden="true" tabindex="-1"></a>                            <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb5-11"><a href="model-machinery.html#cb5-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">nrow =</span> <span class="dv">7</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-12"><a href="model-machinery.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(nutrient_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Feed X1&quot;</span>, <span class="st">&quot;Feed X2&quot;</span>, <span class="st">&quot;Feed X3&quot;</span>)</span>
<span id="cb5-13"><a href="model-machinery.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(nutrient_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Protein&quot;</span>, <span class="st">&quot;NDF&quot;</span>, <span class="st">&quot;Total Amount&quot;</span>,<span class="st">&quot;all feeds&quot;</span>, <span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;X3&quot;</span>)</span>
<span id="cb5-14"><a href="model-machinery.html#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="model-machinery.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the optimization problem</span></span>
<span id="cb5-16"><a href="model-machinery.html#cb5-16" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.15</span>, <span class="fl">0.20</span>, <span class="fl">0.50</span>) <span class="co"># vector of feed costs USD/kg DM</span></span>
<span id="cb5-17"><a href="model-machinery.html#cb5-17" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> nutrient_matrix <span class="co"># constraint matrix</span></span>
<span id="cb5-18"><a href="model-machinery.html#cb5-18" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;&gt;=&quot;</span>, <span class="st">&quot;&gt;=&quot;</span>,<span class="st">&quot;&lt;=&quot;</span>, <span class="st">&quot;=&quot;</span>, <span class="st">&quot;&gt;=&quot;</span>, <span class="st">&quot;&gt;=&quot;</span>, <span class="st">&quot;&gt;=&quot;</span>) <span class="co"># direction of constraints (greater than or equal to)</span></span>
<span id="cb5-19"><a href="model-machinery.html#cb5-19" aria-hidden="true" tabindex="-1"></a>rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">35</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>) <span class="co"># right-hand side of constraints (nutrient requirements)</span></span>
<span id="cb5-20"><a href="model-machinery.html#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="model-machinery.html#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Solve the optimization problem</span></span>
<span id="cb5-22"><a href="model-machinery.html#cb5-22" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">lp</span>(<span class="st">&quot;min&quot;</span>, obj, con, dir, rhs)</span>
<span id="cb5-23"><a href="model-machinery.html#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="model-machinery.html#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the solution</span></span>
<span id="cb5-25"><a href="model-machinery.html#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">&quot;The least-cost ration is:&quot;</span>,</span>
<span id="cb5-26"><a href="model-machinery.html#cb5-26" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st"> x1: &quot;</span>, result<span class="sc">$</span>solution[<span class="dv">1</span>], <span class="st">&quot; proportion feed 1 per kg diet DM&quot;</span>),</span>
<span id="cb5-27"><a href="model-machinery.html#cb5-27" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st"> x2: &quot;</span>, result<span class="sc">$</span>solution[<span class="dv">2</span>], <span class="st">&quot; proportion feed 2 per kg diet DM&quot;</span>),</span>
<span id="cb5-28"><a href="model-machinery.html#cb5-28" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st"> x3: &quot;</span>, result<span class="sc">$</span>solution[<span class="dv">3</span>], <span class="st">&quot; proportion feed 3 per kg diet DM&quot;</span>),</span>
<span id="cb5-29"><a href="model-machinery.html#cb5-29" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Total cost per kg diet DM: $&quot;</span>, result<span class="sc">$</span>objval),</span>
<span id="cb5-30"><a href="model-machinery.html#cb5-30" aria-hidden="true" tabindex="-1"></a>          <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<pre><code>The least-cost ration is: 
 x1: 0.75 proportion feed 1 per kg diet DM 
 x2: 0.25 proportion feed 2 per kg diet DM 
 x3: 0 proportion feed 3 per kg diet DM 
Total cost per kg diet DM: $0.1625</code></pre>
</div>
</div>
<div id="other-important-concepts" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Other important concepts<a href="model-machinery.html#other-important-concepts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="allometric-equations" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Allometric equations<a href="model-machinery.html#allometric-equations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An animal's nutritional processes are clearly affected by its body
weight (BW). Yet the relationship is not necessarily linear. Instead,
nutritionists use allometric equations to estimate how body processes
(e.g., basal metabolic rate) will scale to animals with different body
weights.</p>
<p>Allometric equations are those that relate body weight to physiological
and anatomical features. They have the general form <span class="math inline">\(y = a * BW^b\)</span>,
where <span class="math inline">\(a\)</span> is the intercept when <span class="math inline">\(BW\)</span> = 1, <span class="math inline">\(BW\)</span> is the body weight, and
<span class="math inline">\(b\)</span> is the scaling parameter.</p>
<p>There are two major theories explaining allometric scaling:</p>
<p>In 1883, Rubner proposed that surface area was an important
determinant of metabolic rate. Smaller animals have a greater
surface area to volume ratio than larger animals, and therefore
require a faster metabolic rate. Heat is dissipated through the
surface. This led to a scaling of metabolic rate of <span class="math inline">\(BW^{0.67}\)</span>.</p>
<p>In the 1930s, Kleiber originally empirically derived the <span class="math inline">\(BW^{0.75}\)</span>
scaling relationship across mammals. West and Brown (2005) proposed
that the fluid dynamics of blood within the fractal branching of the
circulatory system determine the metabolic rate. This leads to
metabolic scaling of <span class="math inline">\(BW^{0.75}\)</span> in most animals. In very small
animals, they proposed that blood viscosity increasingly determines
blood flow, leading to a scaling of metabolic rate closer to
<span class="math inline">\(BW^{0.67}\)</span>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-34"></span>
<img src="_main_files/figure-html/unnamed-chunk-34-1.png" alt="Surface area and volume for cubes with increasing side length" width="85%" />
<p class="caption">
Figure 5.2: Surface area and volume for cubes with increasing side length
</p>
</div>
<p>The idea of surface area and volume scaling differently might make more sense if we consider a cube of increasing size.</p>
<p><span class="math inline">\(Surface \space Area \space (A) = 6s^2\)</span></p>
<p><span class="math inline">\(Volume \space (V) = s^3\)</span></p>
<table>
<thead>
<tr class="header">
<th><strong>Side Length (s)</strong></th>
<th><strong>Surface Area (A)</strong></th>
<th><strong>Volume (V)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>6</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>24</td>
<td>8</td>
</tr>
<tr class="odd">
<td>3</td>
<td>54</td>
<td>27</td>
</tr>
<tr class="even">
<td>4</td>
<td>96</td>
<td>64</td>
</tr>
<tr class="odd">
<td>5</td>
<td>150</td>
<td>125</td>
</tr>
<tr class="even">
<td>6</td>
<td>216</td>
<td>216</td>
</tr>
<tr class="odd">
<td>7</td>
<td>294</td>
<td>343</td>
</tr>
<tr class="even">
<td>8</td>
<td>384</td>
<td>512</td>
</tr>
<tr class="odd">
<td>9</td>
<td>486</td>
<td>729</td>
</tr>
<tr class="even">
<td>10</td>
<td>600</td>
<td>1000</td>
</tr>
</tbody>
</table>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-35"></span>
<img src="_main_files/figure-html/unnamed-chunk-35-1.png" alt="Allometric scaling example for cattle" width="85%" />
<p class="caption">
Figure 5.3: Allometric scaling example for cattle
</p>
</div>
<p>West and Brown's (2005) BW^0.75 concept is somewhat harder to visualize. Still, we can picture somewhat how it works by imagining the fractal branching of the circulatory system.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-36"></span>
<img src="_main_files/figure-html/unnamed-chunk-36-1.png" alt="A fractal tree illustrating branching similar to circulation in the animal. Source code for this fractal tree thanks to Martin Stefan:  https://rpubs.com/mstefan-rpubs/fractals" width="85%" />
<p class="caption">
Figure 5.4: A fractal tree illustrating branching similar to circulation in the animal. Source code for this fractal tree thanks to Martin Stefan: <a href="https://rpubs.com/mstefan-rpubs/fractals" class="uri">https://rpubs.com/mstefan-rpubs/fractals</a>
</p>
</div>
<div class="green">
<strong>Test yourself</strong> In what situation would allometric scaling be helpful?
<div id="radio_WARKPKEUSM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WARKPKEUSM" value=""></input> <span>Converting from bodyweight to body condition score</span></label><label><input type="radio" autocomplete="off" name="radio_WARKPKEUSM" value="answer"></input> <span>Predicting basal energy expenditure of animals with differing body size</span></label><label><input type="radio" autocomplete="off" name="radio_WARKPKEUSM" value=""></input> <span>Calculating energy content of milk</span></label>
</div>
</div>
<div class="grey">
<p><strong>Literature deep dive</strong></p>
<p>For an in-depth review of allometric scaling in reference to different
species of ruminants (including exotics!), see Hackmann and Spain
(2010).</p>
<p>Hackmann, T. J., &amp; Spain, J. N. (2010). Invited review: ruminant ecology
and evolution: perspectives useful to ruminant livestock research and
production. Journal of dairy science, 93(4), 1320--1334.
<a href="https://doi.org/10.3168/jds.2009-2071" class="uri">https://doi.org/10.3168/jds.2009-2071</a></p>
<p>For an explanation of the derivation of allometric scaling (more
complex) see West and Brown (2005).</p>
<p>West, G. B., &amp; Brown, J.H. (2005). The origin of allometric scaling laws
in biology from genomes to ecosystems: towards a quantitative unifying
theory of biological structure and organization. J Exp Biol 1 May 2005;
208 (9): 1575--1592. doi: <a href="https://doi.org/10.1242/jeb.01589" class="uri">https://doi.org/10.1242/jeb.01589</a></p>
</div>
</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="requirements.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusions-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
},
"highlight": "espresso",
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
